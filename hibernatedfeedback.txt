Practical 9b
Index.jsp
<html><head>
<title>Guest Book</title>
</head>
<body>
Guest Book <hr><br><br>
<form action="GuestbookView.jsp" >
Name <input type="text" name="name" maxlength="20"><br>
Message <textarea rows="5" cols="40" maxlength="100" name="msg"></textarea>
<br><input type="submit" value="submit">
</form>
</body>
</html>
GuestbookView.jsp
<%@page import="org.hibernate.SessionFactory"%>
<%@page import="org.hibernate.Session"%>
<%@page import="org.hibernate.cfg.Configuration"%>
<%@page import="org.hibernate.Transaction"%>
<%@page import="java.util.List"%>
<%@page import="java.util.Iterator"%>
<%@page import="hibernate.Guestbook"%>
<%!
SessionFactory sf;
org.hibernate.Session ss;
List<hibernate.Guestbook> gbook;
%>
<%
sf = new Configuration().configure().buildSessionFactory();
ss= sf.openSession();
Transaction tx=null;
Guestbook gb=new Guestbook();
try{
tx=ss.beginTransaction();
String name=request.getParameter("name");
String msg=request.getParameter("msg");
String dt=new java.util.Date().toString();
gb.setName(name);
gb.setMsg(msg);
gb.setDt(dt);
ss.save(gb);
tx.commit();
}
catch(Exception e){ out.println("Error"+e.getMessage()); }
try{
ss.beginTransaction();
gbook=ss.createQuery("from Guestbook").list();
}
catch(Exception e){ }
%>
<html>
<head>
<title>Guest View</title>
</head>
<body>
Guest View
Click here to go <a href="index.jsp"> BACK </a>
<br><br>
<%
Iterator it=gbook.iterator();
while(it.hasNext())
{
 Guestbook eachrecord=(Guestbook)it.next();
out.print(eachrecord.getDt()+" ");
out.print(eachrecord.getName()+"<br>");
out.print(eachrecord.getMsg()+"<br><hr>");
}
%>
</body>
</html>
GuestBook.java
package hibernate;
// Generated 27 Sep, 2024 2:20:15 PM by Hibernate Tools 4.3.1
/**
* Guestbook generated by hbm2java
*/
public class Guestbook implements java.io.Serializable {
 private int sno;
 private String name;
 private String msg;
 private String dt;
 public Guestbook() {
 }
 public Guestbook(int sno) {
 this.sno = sno;
 }
 public Guestbook(int sno, String name, String msg, String dt) {
 this.sno = sno;
 this.name = name;
 this.msg = msg;
 this.dt = dt;
 }

 public int getSno() {
 return this.sno;
 }

 public void setSno(int sno) {
 this.sno = sno;
 }
 public String getName() {
 return this.name;
 }

 public void setName(String name) {
 this.name = name;
 }
 public String getMsg() {
 return this.msg;
 }

 public void setMsg(String msg) {
 this.msg = msg;
 }
 public String getDt() {
 return this.dt;
 }

 public void setDt(String dt) {
 this.dt = dt;
 }
}